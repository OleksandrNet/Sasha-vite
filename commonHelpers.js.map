{"version":3,"file":"commonHelpers.js","sources":["../src/js/game-xo.js"],"sourcesContent":["const contentRef = document.querySelector('.js-content');\nconst historyX = [];\nconst historyO = [];\nconst combination = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9],\n  [1, 4, 7],\n  [2, 5, 8],\n  [1, 5, 9],\n  [3, 5, 7],\n  [3, 6, 9],\n];\n\nlet player = 'X';\n\ncontentRef.addEventListener('click', handlerStep);\ncontentRef.insertAdjacentHTML('afterbegin', createMarkup());\nfunction handlerStep(evt) {\n  if (evt.target.textContent !== '') {\n    return;\n  }\n\n  const id = Number(evt.target.dataset.id);\n  const minStepCount = 3;\n  let isWinner = false;\n\n  evt.target.textContent = player;\n\n  if (player === 'X') {\n    historyX.push(id);\n    isWinner = historyX.length >= minStepCount ? checkWinner(historyX) : false;\n  } else {\n    historyO.push(id);\n    isWinner = historyO.length >= minStepCount ? checkWinner(historyO) : false;\n  }\n\n  if (isWinner) {\n    const instance = basicLightbox.create(`\n        <div class=\"box\">\n            <h2>–ì—Ä–∞–≤–µ—Ü—å - (${player}) –ø–µ—Ä–µ–º—ñ–≥ üëç</h2>\n        </div>\n    `);\n    instance.show();\n    resetGame();\n    return;\n  }\n\n  const isDraw = [...contentRef.children].every(\n    item => item.textContent !== ''\n  );\n\n  //   const isDrawSecond = historyX.length + historyO.length === 9\n\n  if (isDraw) {\n    const instance = basicLightbox.create(`\n        <div class=\"box\">\n            <h2>üò∞ –ù—ñ—á—ñ—è</h2>\n        </div>\n    `);\n    instance.show();\n    resetGame();\n    return;\n  }\n  player = player === 'X' ? 'O' : 'X';\n}\n\nfunction checkWinner(arr) {\n  return combination.some(item => item.every(id => arr.includes(id)));\n}\n\nfunction resetGame() {\n  contentRef.innerHTML = createMarkup();\n  player = 'X';\n  historyO.splice(0);\n  historyX.splice(0);\n}\nfunction createMarkup() {\n  let markup = '';\n  for (let i = 1; i <= 9; i += 1) {\n    markup += `<li class=\"item\" data-id=\"${i}\"></li>`;\n  }\n\n  return markup;\n}\n"],"names":["contentRef","historyX","historyO","combination","player","handlerStep","createMarkup","evt","id","minStepCount","isWinner","checkWinner","resetGame","item","arr","markup","i"],"mappings":"oCAAA,MAAMA,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAW,CAAA,EACXC,EAAW,CAAA,EACXC,EAAc,CAClB,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,EACR,CAAC,EAAG,EAAG,CAAC,CACV,EAEA,IAAIC,EAAS,IAEbJ,EAAW,iBAAiB,QAASK,CAAW,EAChDL,EAAW,mBAAmB,aAAcM,EAAY,CAAE,EAC1D,SAASD,EAAYE,EAAK,CACxB,GAAIA,EAAI,OAAO,cAAgB,GAC7B,OAGF,MAAMC,EAAK,OAAOD,EAAI,OAAO,QAAQ,EAAE,EACjCE,EAAe,EACrB,IAAIC,EAAW,GAYf,GAVAH,EAAI,OAAO,YAAcH,EAErBA,IAAW,KACbH,EAAS,KAAKO,CAAE,EAChBE,EAAWT,EAAS,QAAUQ,EAAeE,EAAYV,CAAQ,EAAI,KAErEC,EAAS,KAAKM,CAAE,EAChBE,EAAWR,EAAS,QAAUO,EAAeE,EAAYT,CAAQ,EAAI,IAGnEQ,EAAU,CACK,cAAc,OAAO;AAAA;AAAA,6BAEbN,CAAM;AAAA;AAAA,KAE9B,EACQ,KAAI,EACbQ,IACA,MACD,CAQD,GANe,CAAC,GAAGZ,EAAW,QAAQ,EAAE,MACtCa,GAAQA,EAAK,cAAgB,EACjC,EAIc,CACO,cAAc,OAAO;AAAA;AAAA;AAAA;AAAA,KAIrC,EACQ,KAAI,EACbD,IACA,MACD,CACDR,EAASA,IAAW,IAAM,IAAM,GAClC,CAEA,SAASO,EAAYG,EAAK,CACxB,OAAOX,EAAY,KAAKU,GAAQA,EAAK,MAAML,GAAMM,EAAI,SAASN,CAAE,CAAC,CAAC,CACpE,CAEA,SAASI,GAAY,CACnBZ,EAAW,UAAYM,IACvBF,EAAS,IACTF,EAAS,OAAO,CAAC,EACjBD,EAAS,OAAO,CAAC,CACnB,CACA,SAASK,GAAe,CACtB,IAAIS,EAAS,GACb,QAASC,EAAI,EAAGA,GAAK,EAAGA,GAAK,EAC3BD,GAAU,6BAA6BC,CAAC,UAG1C,OAAOD,CACT"}